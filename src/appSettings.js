const fs=require('fs');class Settings{constructor(path){try{this.store=JSON.parse(fs.readFileSync(path));}catch{this.store={};}this.path=path;this.mod=this.getMod();log('Settings',this.path,this.store);}getMod(){try{return fs.statSync(this.path).mtime.getTime();}catch{}}get(k,d){return this.store[k]??d;}set(k,v){this.store[k]=v;}save(){if(this.mod&&this.mod!==this.getMod())return;try{fs.writeFileSync(this.path,JSON.stringify(this.store,null,2));this.mod=this.getMod();log('Settings','Saved');}catch(e){log('Settings',e);}}}let inst;exports.getSettings=()=>inst=inst??new Settings(require('path').join(require('./paths').getUserData(),'settings.json'));