const {join}=require('path');global.log=(area,...args)=>console.log(`[\x1b[38;2;88;101;242mOpenAsar\x1b[0m > ${area}]`,...args);global.oaVersion='nightly-4f264d8';log('Init','OpenAsar',oaVersion);if(process.resourcesPath.startsWith('/usr/lib/electron'))global.systemElectron=true;process.resourcesPath=join(__dirname,'..');const paths=require('./paths');paths.init();global.settings=require('./appSettings').getSettings();global.oaConfig=settings.get('openasar',{});require('./cmdSwitches')();const M=require('module');const b=join(paths.getExeDir(),'modules');if(process.platform==='win32')try{for(const m of require('fs').readdirSync(b))M.globalPaths.unshift(join(b,m));}catch{log('Init','Failed to QS globalPaths')}const rlp=M._resolveLookupPaths;M._resolveLookupPaths=(request,parent)=>{if(parent?.paths?.length>0)parent.paths=parent.paths.concat(M.globalPaths);return rlp(request,parent);};if(process.argv.includes('--overlay-host')){require('discord_overlay2/standalone_host.js');}else {require('./bootstrap')();}